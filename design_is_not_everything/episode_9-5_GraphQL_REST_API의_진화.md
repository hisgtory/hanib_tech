# Episode 9-5: GraphQL, REST API의 진화
## 구시가지에서 신도시로 떠난 데이터 여행기

### 프롤로그: 왜 새로운 여행지를 찾게 되었나

REST API 구시가지에서 몇 년간 살아보니 알게 되었다. 분명 매력적인 곳이지만, 현대적인 여행자들의 니즈를 완벽히 충족시키기에는 한계가 있었다는 것을.

마치 유럽 배낭여행을 떠날 때, 각 도시마다 별도의 항공편을 예약하고, 호텔도 따로따로 찾고, 식당도 일일이 검색해야 했던 것처럼 말이다. 물론 그 과정 자체가 여행의 묘미일 수도 있지만, 때로는 "한 번에 다 해결할 수 없을까?"라는 생각이 들었다.

그렇게 발견한 곳이 바로 GraphQL 신도시였다.

---

### Chapter 1: REST 구시가지의 추억과 한계

#### 🏛️ 구시가지의 매력

REST 구시가지는 정말 체계적인 곳이었다. 각 거리마다 명확한 이름이 있었고(`/users`, `/posts`, `/comments`), 무엇을 하고 싶은지에 따라 방법도 정해져 있었다(GET으로 구경하기, POST로 새로 만들기, PUT으로 수정하기, DELETE로 삭제하기).

```
GET /users/123        // 사용자 정보 가져오기
GET /posts/456        // 게시글 정보 가져오기  
GET /posts/456/comments // 댓글들 가져오기
```

마치 파리의 샹젤리제 거리처럼, 각각의 목적지가 분명하고 길찾기가 쉬웠다.

#### 😰 하지만 현실은...

그런데 실제로 살아보니 불편한 점들이 보이기 시작했다.

**Over-fetching: 필요 이상으로 많이 가져오는 문제**
```
GET /users/123
// 응답: 
{
  "id": 123,
  "name": "김마케터",
  "email": "marketer@company.com",
  "address": "서울시 강남구...",
  "phone": "010-1234-5678",
  "birthday": "1990-01-01",
  "hobby": "여행",
  "favorite_color": "blue",
  // ... 20개가 넘는 필드들
}
```

사용자 이름만 필요한데, 마치 커피 한 잔만 주문했는데 풀코스 요리가 나오는 상황이었다. 모바일에서는 특히 데이터 낭비가 심각했다.

**Under-fetching: 여러 번 요청해야 하는 문제**
```
// 게시글과 작성자 정보를 함께 보려면
1. GET /posts/456      // 게시글 정보
2. GET /users/123      // 작성자 정보
3. GET /posts/456/comments // 댓글들
4. GET /users/789      // 첫 번째 댓글 작성자
// ... 계속 반복
```

마치 유럽여행에서 파리 → 로마 → 베를린을 가려는데, 각각 별도의 항공편을 예약해야 하는 것과 같았다.

> **📸 여행 TMI**
> Facebook이 GraphQL을 만든 이유도 바로 이것! 모바일 앱에서 프로필 화면을 보여주려면 사용자 정보, 친구 목록, 최근 게시글, 사진 등을 각각 요청해야 했는데, 이게 너무 비효율적이었다고 한다.

---

### Chapter 2: GraphQL 신도시 첫 방문

#### 🌟 첫인상: "이게 정말 가능해?"

GraphQL 신도시에 도착한 첫날, 가장 놀란 건 '원스톱 서비스'였다.

```graphql
query {
  post(id: "456") {
    title
    content
    author {
      name
      email
    }
    comments {
      content
      author {
        name
      }
    }
  }
}
```

한 번의 요청으로 게시글, 작성자, 댓글, 댓글 작성자까지 모든 걸 가져올 수 있었다! 마치 여행사에서 "파리-로마-베를린 패키지, 항공편-숙박-식사 올인클루시브"를 예약하는 것 같았다.

#### 🎯 정확히 원하는 것만

더 신기했던 건, 필요한 정보만 골라서 가져올 수 있다는 점이었다.

```graphql
query {
  users {
    name    // 이름만 필요해
    email   // 이메일만 필요해
    // 나머지 20개 필드는 빼고
  }
}
```

REST에서는 풀코스 요리를 강요받았다면, GraphQL에서는 "샐러드 하나, 파스타 하나만 주세요"라고 주문할 수 있었다.

---

### Chapter 3: 신도시 생활 체험기

#### 🚀 개발자와의 협업이 달라졌다

**Before (REST 시절):**
- "API 문서 어디 있죠?"
- "이 엔드포인트 언제 만들어지나요?"
- "모바일용 별도 API 필요해요"

**After (GraphQL):**
- "스키마 보고 필요한 거 알아서 가져가세요"
- "프론트엔드에서 원하는 대로 조합해서 쓰세요"
- "같은 API로 웹, 모바일 다 해결돼요"

마치 전담 가이드가 있는 맞춤형 여행과 같았다.

#### 💡 실제 프로젝트에서 경험한 것들

**케이스 1: 사용자 목록 페이지**
```graphql
# 관리자용 - 상세 정보 필요
query AdminUsers {
  users {
    id
    name
    email
    phone
    registrationDate
    lastLoginAt
    status
  }
}

# 일반 사용자용 - 간단한 정보만
query PublicUsers {
  users {
    id
    name
    profileImage
  }
}
```

같은 데이터소스, 다른 요구사항. GraphQL에서는 쿼리만 바꾸면 끝이었다.

**케이스 2: 대시보드 데이터**
```graphql
query Dashboard {
  me {
    name
    notifications {
      count
      recent(limit: 3) {
        message
        createdAt
      }
    }
    projects {
      name
      status
      tasks {
        completed
        total
      }
    }
  }
}
```

REST였다면 최소 5-6번의 API 호출이 필요했을 데이터를 한 번에 가져왔다.

---

### Chapter 4: 신도시의 그림자

#### 🤔 완벽하지만은 않았다

물론 GraphQL 신도시도 단점이 있었다.

**학습 곡선**
REST는 "주소만 알면 찾아가세요"였다면, GraphQL은 "쿼리 언어를 배워야 해요"였다. 마치 현지 언어를 배워야 진짜 여행을 즐길 수 있는 것처럼.

**캐싱의 복잡성**
REST에서는 `/users/123`을 캐싱하면 끝이었다. GraphQL에서는 같은 데이터라도 쿼리에 따라 달라지니 캐싱이 복잡했다.

**오버 엔지니어링 위험**
간단한 CRUD만 하면 되는데 GraphQL을 쓰는 건, 동네 마트 가는데 KTX를 타는 격이었다.

> **🗺️ 여행 팁**
> GraphQL은 복잡한 데이터 관계가 있고, 다양한 클라이언트(웹, 모바일, 태블릿)를 지원해야 할 때 진가를 발휘한다. 단순한 API라면 REST가 더 나을 수도 있다.

---

### Chapter 5: 두 도시 모두 사랑하는 법

#### 🎭 상황에 맞는 선택

몇 년간 두 곳을 오가며 깨달은 것이 있다. 정답은 "상황에 따라 다르다"는 것.

**REST를 선택할 때:**
- 단순한 CRUD 작업이 주
- 팀이 REST에 익숙함
- 빠른 개발이 필요함
- 캐싱이 중요함

**GraphQL을 선택할 때:**
- 복잡한 데이터 관계
- 다양한 클라이언트 지원
- 개발 리소스 최적화가 중요함
- 실시간 업데이트(Subscription) 필요

#### 🤝 실무에서의 조화

실제로는 둘 다 쓰는 경우도 많다.

```
# 간단한 작업 - REST
GET /health-check
POST /login
GET /logout

# 복잡한 데이터 조회 - GraphQL  
query ComplexDashboard { ... }
subscription RealTimeUpdates { ... }
```

마치 도시 내 이동은 지하철, 장거리는 KTX를 쓰는 것처럼.

---

### 에pilogue: 여행에서 배운 것들

GraphQL과 REST, 두 도시를 모두 경험해보니 알게 되었다. 중요한 건 기술 자체가 아니라 **무엇을 해결하려고 하는가**였다.

REST 구시가지의 단순함과 안정성, GraphQL 신도시의 유연성과 효율성. 각각의 장점을 이해하고, 상황에 맞게 선택할 줄 아는 것이 진짜 여행 고수의 자세인 것 같다.

개발자와 협업할 때도 마찬가지다. "GraphQL이 최신 기술이니까 무조건 써야 해"가 아니라, "우리 프로젝트에는 어떤 접근이 더 적합할까?"를 함께 고민하는 것이 중요하다.

---

### 🎒 여행 가이드북 정리

#### REST API 특징
- **장점**: 단순함, 캐싱 용이, 학습 쉬움
- **단점**: Over/Under-fetching, 여러 요청 필요
- **적합한 상황**: 단순한 CRUD, 빠른 개발

#### GraphQL 특징  
- **장점**: 정확한 데이터, 한 번의 요청, 강력한 툴링
- **단점**: 학습 곡선, 복잡한 캐싱, 오버 엔지니어링 위험
- **적합한 상황**: 복잡한 데이터, 다양한 클라이언트

#### 실무 팁
1. 프로젝트 복잡도를 먼저 파악하라
2. 팀의 기술 수준을 고려하라  
3. 유지보수 비용까지 생각하라
4. 작게 시작해서 점진적으로 확장하라

---

*"기술은 도구일 뿐, 중요한 건 사용자에게 어떤 가치를 주느냐다."*

**#GraphQL #RESTAPI #개발자와소통하기 #비개발자를위한IT #hanib_tech #API진화 #데이터여행기**

---

> 이 여행기가 도움이 되었다면, 다음 에피소드에서는 "WebSocket, 실시간 소통의 비밀"로 떠날 예정입니다. 계속 함께해주세요! ✈️
-----

## 📝 Feedback

### 현재 잘된 점
- 핵심 개념을 명확하게 설명
- 실무 예시와 사례 제공
- 단계별 가이드 포함

### 개선이 필요한 부분

1. **디자이너 관점 추가**
   - 디자이너가 이해해야 할 핵심 포인트
   - 디자인 작업과의 연관성
   - 협업 시 주의사항

2. **실무 대화 예시**
   - 팀 미팅에서의 실제 대화
   - 갈등 상황과 해결 방법
   - 효과적인 커뮤니케이션 팁

3. **실패 사례와 교훈**
   - 실제 프로젝트 실패 경험
   - 피해야 할 함정들
   - 배운 교훈과 개선 방안

4. **실용적 도구/템플릿**
   - 바로 사용 가능한 템플릿
   - 추천 도구와 서비스
   - 체크리스트와 가이드라인

5. **시각적 요소 강화**
   - 프로세스 다이어그램
   - 비교 표와 차트
   - 인포그래픽 추가 제안
